$(function(){function t(t,n){var a=$('<div id="tumbler"></div>'),i=$('<a href="#upcoming-events" class="tumbler" id="upcoming-events">Upcoming Events</a>'),c=$('<a href="#past-events" class="tumbler" id="past-events">Past Events</a>');"upcoming-events"===p?i.addClass("active"):c.addClass("active"),a.append(i),a.append(c);var o=$("#bands-in-town-widget");o.append(a);var r=e("upcoming-events",t),l=e("past-events",n);o.append(r),o.append(l),d(),s()}function e(t,e){var a=$('<tr class="header"></tr>');a.append('<th class="date">Date</th>'),a.append('<th class="venue">Venue</th>'),a.append('<th class="location">Location</th>'),"upcoming-events"===t&&a.append('<th class="tickets">Tickets</th>');var s=$('<table id="'+t+'"></table>');t!==p&&s.css("display","none"),s.append(a);for(var i=0;i<e.length;++i){var c=n(e[i]);s.append(c)}return s}function n(t){var e=$('<tr class="event"></tr>'),n=$('<td class="date"></td>'),s=$('<td class="venue"></td>'),i=$('<td class="location"></td>'),c=$('<td class="location"></td>');return n.html(a(new Date(t.datetime))),e.append(n),s.html(t.venue.name),e.append(s),i.html(t.venue.city+", "+t.venue.country),e.append(i),o(t)||(c.html("<a href="+t.ticket_url+' title="Tickets for '+t.title+'">'+t.ticket_type+"</a>"),e.append(c)),e}function a(t){var e,n=$("<span></span>");switch(t.getMonth()){case 0:e="Jan";break;case 1:e="Feb";break;case 2:e="Mar";break;case 3:e="Apr";break;case 4:e="May";break;case 5:e="Jun";break;case 6:e="Jul";break;case 7:e="Aug";break;case 8:e="Sep";break;case 9:e="Oct";break;case 10:e="Nov";break;case 11:e="Dec"}return n.html(t.getDate()+" "+e+" "+t.getFullYear()),n}function s(){$("#bands-in-town-widget a#upcoming-events").on("click",function(){p="upcoming-events",i(),$("#bands-in-town-widget #tumbler a#upcoming-events").css("background-color","#0CC9F1"),$("#bands-in-town-widget #tumbler a#upcoming-events").css("color","#fff"),$("#bands-in-town-widget #tumbler a#past-events").css("background-color","#fff"),$("#bands-in-town-widget #tumbler a#past-events").css("color","#000")}),$("#bands-in-town-widget a#past-events").on("click",function(){p="past-events",c(),$("#bands-in-town-widget #tumbler a#past-events").css("background-color","#0CC9F1"),$("#bands-in-town-widget #tumbler a#past-events").css("color","#fff"),$("#bands-in-town-widget #tumbler a#upcoming-events").css("background-color","#fff"),$("#bands-in-town-widget #tumbler a#upcoming-events").css("color","#000")})}function i(){$("#bands-in-town-widget table#past-events").fadeOut(100,function(){$("#bands-in-town-widget table#upcoming-events").fadeIn(100)})}function c(){$("#bands-in-town-widget table#upcoming-events").fadeOut(100,function(){$("#bands-in-town-widget table#past-events").fadeIn(100)})}function o(t){var e=new Date,n=new Date(t.datetime);return e>n?!0:!1}function d(){$("#bands-in-town-widget table").css("border-spacing","0"),$("#bands-in-town-widget table tr:nth-child(even)").css("background-color","#F8F8F8"),$("#bands-in-town-widget table td, th").css("padding","10px 15px"),$("#bands-in-town-widget #tumbler").css("margin-bottom","20px"),$("#bands-in-town-widget #tumbler a").css("text-decoration","none"),$("#bands-in-town-widget #tumbler a").css("padding","7px 12px"),$("#bands-in-town-widget #tumbler a.active").css("background-color","#0CC9F1"),$("#bands-in-town-widget #tumbler a.active").css("color","#fff")}var r=window.location.hash.slice(1),p=r||"upcoming-events";$.ajax({url:"http://api.bandsintown.com/artists/Brunettes%20Shoot%20Blondes/events.json?api_version=2.0&date=all&app_id=poohitan",success:function(e){for(var n=[],a=[],s=0;s<e.length;++s){var i=e[s];o(i)?a.unshift(i):n.push(i)}t(n,a)},dataType:"jsonp"})});